export async function wikiImageFor(query){ const q=encodeURIComponent(String(query).trim()); let res=await fetch(`https://fa.wikipedia.org/api/rest_v1/page/summary/${q}`); if(res.ok){const d=await res.json(); const t=d?.thumbnail?.source||d?.originalimage?.source; if(t) return t;} res=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${q}`); if(res.ok){const d=await res.json(); const t=d?.thumbnail?.source||d?.originalimage?.source; if(t) return t;} const s=await fetch(`https://en.wikipedia.org/w/rest.php/v1/search/title?q=${q}&limit=1`); if(s.ok){const js=await s.json(); const title=js?.pages?.[0]?.title; if(title){ const r2=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(title)}`); if(r2.ok){ const d2=await r2.json(); const t2=d2?.thumbnail?.source||d2?.originalimage?.source; if(t2) return t2; } } } return null; }