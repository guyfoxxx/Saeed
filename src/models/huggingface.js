export async function hfText(token,model,input,sys){ const res=await fetch(`https://api-inference.huggingface.co/models/${encodeURIComponent(model)}`,{method:"POST",headers:{authorization:`Bearer ${token}`,"content-type":"application/json"},body:JSON.stringify({inputs:`${sys}\n\nUser: ${input}`})}); if(!res.ok) throw new Error(`HF ${res.status}`); const d=await res.json(); if(Array.isArray(d)&&d[0]?.generated_text) return d[0].generated_text; if(typeof d==="string") return d; return JSON.stringify(d);} export async function hfVision(token,model,imageUrl,input,sys){ const payload={inputs:[{role:"system",content:sys},{role:"user",content:[{type:"text",text:input},{type:"image_url",image_url:imageUrl}]}]}; const res=await fetch(`https://api-inference.huggingface.co/models/${encodeURIComponent(model)}`,{method:"POST",headers:{authorization:`Bearer ${token}`,"content-type":"application/json"},body:JSON.stringify(payload)}); if(!res.ok) throw new Error(`HF ${res.status}`); const d=await res.json(); const txt=d?.generated_text||d?.[0]?.generated_text||d?.choices?.[0]?.message?.content; return txt?String(txt):JSON.stringify(d);}