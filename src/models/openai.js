export async function oaiText(key,model,input,sys){ const res=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${key}`},body:JSON.stringify({model,messages:[{role:"system",content:sys},{role:"user",content:input}],temperature:0.2})}); if(!res.ok) throw new Error(`OpenAI ${res.status}`); const d=await res.json(); return d?.choices?.[0]?.message?.content??"";} export async function oaiVision(key,model,imageUrl,input,sys){ const res=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${key}`},body:JSON.stringify({model,messages:[{role:"system",content:sys},{role:"user",content:[{type:"text",text:input},{type:"image_url",image_url:{url:imageUrl}}]}]})}); if(!res.ok) throw new Error(`OpenAI ${res.status}`); const d=await res.json(); return d?.choices?.[0]?.message?.content??"";}